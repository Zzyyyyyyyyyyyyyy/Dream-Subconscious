/*
  styles/main.css
  Structure-first CSS (no visual tokens like colors/sizes).
  Order:
  1) Reset
  2) Base / Typography
  3) Layout
  4) Components / Blocks (BEM)
  5) Utilities
*/

/* 1) Reset */
*, *::before, *::after {
  box-sizing: border-box;
}

html, body {
  height: 100%;
}

body, h1, h2, h3, p, ul, ol, li, figure {
  margin: 0;
  padding: 0;
}

/* 2) Base / Typography (generic tags only) */
body {
  line-height: 1.5;
}

ul, ol {
  list-style-position: inside;
}

img {
  display: block;
  max-width: 100%;
}

/* 3) Layout */
main {
  display: block;
}

section {
  display: block;
}

/* 4) Components / Blocks (BEM) */

/* Block: site-header (parent)
   Children: .site-header__inner, .site-header__title, .site-header__nav, .site-header__menu, .site-header__menu-item, .site-header__link
   Notes: Modern, minimal, grid-based header. Structure-first (layout/spacing only).
*/
.site-header {
  position: sticky;
  inset-block-start: 0;
  z-index: 50;
  border-block-end: 1px solid var(--border, currentColor);
}
.site-header__inner {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 0.75rem;
  padding-block: 0.75rem;
  padding-inline: 1rem;
  max-inline-size: 80rem;
  margin-inline: auto;
}
.site-header__title {
  font-size: 1.125rem;
  line-height: 1.2;
}
.site-header__nav { }
.site-header__menu {
  display: inline-flex;
  gap: 0.25rem;
  padding: 0;
  margin: 0;
  list-style: none;
}
.site-header__menu-item { }
.site-header__link {
  display: inline-block;
  padding-block: 0.5rem;
  padding-inline: 0.75rem;
  border-radius: var(--radius-m, 6px);
  text-decoration: none;
  line-height: 1;
  outline: none;
}
.site-header__link:focus-visible {
  outline: 2px solid var(--ring, currentColor);
  outline-offset: 2px;
}

/* Block: feature (parent)
   Children: .feature__heading, .feature__content, .feature__text, .feature__figure, .feature__image, .feature__caption
   Modifiers: .feature--compact (example)
*/
.feature {}
.feature__heading {}
.feature__content {}
.feature__text {}
.feature__figure {}
.feature__image {}
.feature__caption {}
.feature--compact {}

/* Block: timeline (parent)
   Children: .timeline__heading, .timeline__list, .timeline__item, .timeline__label, .timeline__action
   States:   .timeline__item--active (example)
*/
.timeline {}
.timeline__heading {}
.timeline__list {}
.timeline__item {}
.timeline__label {}
.timeline__action {}
.timeline__item--active {}

/* Block: site-footer (parent)
   Children: .site-footer__legal
*/
.site-footer {}
.site-footer__legal {}

/* Block: surreal (parent)
   Children: .surreal__heading, .surreal__grid, .surreal__card, .surreal__visual, .surreal__windows, .surreal__window, .surreal__window-title, .surreal__window-prompt, .surreal__window-quote, .surreal__image, .surreal__element, .surreal__shard
   Modifiers: .surreal__element--clock, .surreal__element--crack, .surreal__shard--a, .surreal__shard--b, .surreal__shard--c
   States:   [data-position] (on .surreal__window), [data-active="true"] (on .surreal__window)
*/
.surreal {
  min-height: 100vh; /* full-viewport section */
}

.surreal__heading {}

.surreal__grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  grid-template-rows: repeat(8, minmax(0, 1fr));
  gap: 0;
  align-items: stretch;
  min-height: 100vh;
}

.surreal__card {
  position: relative;
  grid-column: 3 / span 8;
  grid-row: 2 / span 5;
  display: grid;
  overflow: hidden;
  border-radius: var(--radius-xl, 24px);
  isolation: isolate;
  min-height: clamp(20rem, 60vh, 36rem);
}

.surreal__card::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6));
  opacity: 0.8;
  z-index: 1;
}

.surreal__visual {
  position: absolute;
  inset: 0;
  overflow: hidden;
  z-index: 0;
}

.surreal__windows {
  position: relative;
  display: grid;
  gap: 1rem;
  padding: 2.5rem;
  align-content: center;
  justify-items: start;
  z-index: 2;
}

.surreal__window {
  display: grid;
  gap: 0.5rem;
  transition: transform 320ms ease, opacity 320ms ease;
  --surreal-window-translate: 0%;
  transform: translateY(var(--surreal-window-translate));
}

.surreal__window[data-position="0"] {
  --surreal-window-translate: 0%;
  opacity: 1;
}

.surreal__window[data-position="1"] {
  --surreal-window-translate: 12%;
  opacity: 0.7;
}

.surreal__window[data-position="2"] {
  --surreal-window-translate: 24%;
  opacity: 0.4;
}

.surreal__window[data-position="off"] {
  --surreal-window-translate: 32%;
  opacity: 0;
}

.surreal__window[data-active="true"] {
  transform: translateY(var(--surreal-window-translate)) scale(1.02);
}

.surreal__window[data-pulse="true"] {
  animation: surreal-window-pulse 420ms ease;
}

@keyframes surreal-window-pulse {
  0% { opacity: 0.4; transform: translateY(var(--surreal-window-translate)) scale(0.98); }
  100% { opacity: 1; transform: translateY(var(--surreal-window-translate)) scale(1.02); }
}

.surreal__window-title { max-inline-size: 32ch; }
.surreal__window-prompt { max-inline-size: 36ch; }
.surreal__window-quote { max-inline-size: 36ch; }

.surreal__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Secondary elements layout */
.surreal__element,
.surreal__shard {
  align-self: stretch;
  justify-self: stretch;
}

.surreal__element--clock {
  grid-column: 2 / span 2;
  grid-row: 3 / span 2;
}

.surreal__element--crack {
  grid-column: 10 / span 2;
  grid-row: 2 / span 3;
}

.surreal__shard--a {
  grid-column: 1 / span 2;
  grid-row: 6 / span 2;
}

.surreal__shard--b {
  grid-column: 6 / span 2;
  grid-row: 1 / span 2;
}

.surreal__shard--c {
  grid-column: 11 / span 2;
  grid-row: 7 / span 2;
}

/* Breeze: small drift using CSS variables */
.surreal__element[data-float],
.surreal__shard[data-float] {
  --tx: 0%;
  --ty: 0%;
  --dur: 12s;
  --delay: 0s;
  animation: surreal-float var(--dur) ease-in-out var(--delay) infinite alternate;
}

@keyframes surreal-float {
  from { transform: translate(0%, 0%); }
  to   { transform: translate(var(--tx), var(--ty)); }
}

/* Block: chaos (parent)\n   Children: .chaos__heading, .chaos__content, .chaos__controls, .chaos__btn, .chaos__hint,\n             .chaos__console, .chaos__whisper, .chaos__ring, .chaos__ring-item,\n             .chaos__stage, .chaos__noise, .chaos__cracks, .chaos__void, .chaos__void-line,\n             .chaos__orbit, .chaos__fragments, .chaos__fragment, .chaos__figure,\n             .chaos__image, .chaos__copy, .chaos__line\n   Modifiers: .chaos__fragment--spotlight, .chaos__ring-item--active\n   States:   .chaos--drift, .chaos--grid, .chaos--reveal, .chaos--panic\n*/\n.chaos {}\n.chaos__heading {}\n.chaos__content { display: grid; gap: 1.5rem; }\n.chaos__controls { display: flex; gap: 0.5rem; align-items: center; flex-wrap: wrap; }\n.chaos__btn { cursor: pointer; }\n.chaos__hint { opacity: 0.8; }\n\n.chaos__console { margin-top: 1rem; display: grid; gap: 0.75rem; justify-items: start; }\n.chaos__whisper { min-height: 1.5rem; }\n.chaos__ring { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(2.25rem, 1fr); gap: 0.5rem; margin: 0; padding: 0; list-style: none; }\n.chaos__ring-item { display: grid; place-items: center; min-height: 2.25rem; border-radius: 999px; opacity: 0.2; transition: opacity 0.6s ease, transform 0.6s ease; }\n.chaos__ring-item--active { opacity: 0.75; transform: scale(1.08); }\n\n.chaos__stage { position: relative; min-height: 60vh; display: grid; place-items: center; padding: 1rem; overflow: hidden; }\n.chaos__noise { position: absolute; inset: 0; pointer-events: none; opacity: 0.5; animation: chaos-pulse 1.8s ease-in-out infinite; }\n.chaos__cracks { position: absolute; inset: 0; pointer-events: none; opacity: 0; }\n\n.chaos__void { position: absolute; inset: 15% 20%; display: grid; place-items: center; text-align: center; pointer-events: none; opacity: 0.85; transition: opacity 0.4s ease; }\n.chaos__void-line { margin: 0; }\n\n.chaos__orbit { position: relative; width: min(60vmin, 32rem); aspect-ratio: 1 / 1; display: grid; place-items: center; transition: transform 0.3s ease; }\n.chaos__fragments { position: relative; width: 100%; height: 100%; }\n.chaos__fragment { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) translate(var(--chaos-x, 0%), var(--chaos-y, 0%)); transition: transform 0.6s ease; will-change: transform; }\n.chaos__fragment--spotlight { outline: 2px solid var(--ring, currentColor); outline-offset: 3px; }\n.chaos__figure {}\n.chaos__image { width: 100%; height: 100%; object-fit: cover; }\n\n.chaos__copy { position: absolute; left: 0; right: 0; bottom: 0; display: grid; gap: 0.25rem; pointer-events: none; padding: 0.5rem; }\n.chaos__line {}\n\n/* States */\n.chaos--grid .chaos__orbit { width: 100%; transform: none; }\n.chaos--grid .chaos__fragments { position: static; display: grid; grid-template-columns: repeat(auto-fit, minmax(8rem, 1fr)); gap: 0.75rem; }\n.chaos--grid .chaos__fragment { position: relative; transform: none; }\n.chaos--grid .chaos__ring-item { opacity: 0.35; }\n\n.chaos--reveal .chaos__noise { opacity: 1; }\n.chaos--reveal .chaos__cracks { opacity: 1; }\n.chaos--reveal .chaos__void { opacity: 1; }\n\n.chaos--panic .chaos__orbit { transform: scale(1.03); }\n.chaos--panic .chaos__ring-item--active { transform: scale(1.15); }\n.chaos--panic .chaos__noise { animation-duration: 0.9s; }\n\n/* Keyframes (structure-only motion) */\n@keyframes chaos-pulse {\n  0%, 100% { opacity: 0.4; }\n  50% { opacity: 0.8; }\n}\n
/* Block: thread (parent)
   Children: .thread__heading, .thread__inner, .thread__timeline, .thread__dot,
             .thread__display, .thread__label, .thread__active-title,
             .thread__active-whisper, .thread__selected, .thread__chip, .thread__sentence
   States:   [data-active="true"] on .thread__dot
*/
.thread {}
.thread__heading {}
.thread__inner {
  display: grid;
  gap: 1rem;
  grid-template-columns: minmax(0, auto) 1fr;
  align-items: start;
}
.thread__timeline {
  display: grid;
  grid-auto-flow: row;
  row-gap: 0.75rem;
  justify-items: center;
}
.thread__dot {
  inline-size: 0.75rem;
  aspect-ratio: 1 / 1;
  border-radius: 999px;
  border: 1px solid currentColor;
}
.thread__dot[data-active="true"] {
  background: currentColor; /* structural only */
}
.thread__display {
  display: grid;
  gap: 0.5rem;
  align-content: start;
}
.thread__label {
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
}
.thread__active-title {
  font-size: 1rem;
  line-height: 1.2;
}
.thread__active-whisper {
  min-block-size: 2.25em;
}
.thread__selected {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  list-style: none;
  padding: 0;
  margin: 0;
}
.thread__chip {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  border: 1px solid currentColor;
  border-radius: var(--radius-s, 4px);
  padding-block: 0.125rem;
  padding-inline: 0.5rem;
  font-size: 0.875rem;
}
.thread__sentence {
  min-block-size: 1.5em;
}

/* Block: fragments (parent)
   Children: .fragments__heading, .fragments__grid, .fragments__card, .fragments__figure,
             .fragments__img, .fragments__caption, .fragments__select, .fragments__title
   Modifiers: .fragments__card--selected, .fragments__card--active
   Notes: Grid deck with pointer-responsive halo overlay.
*/
.fragments {
  position: relative;
  padding-block: 1rem; /* structural spacing */
}
.fragments::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  /* Tilted fracture lines background (structural only) */
  background-image: repeating-linear-gradient(-12deg, currentColor 0 1px, transparent 1px 18px);
  opacity: 0.12;
}
.fragments__heading {}
.fragments__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(22rem, 1fr));
  gap: 1rem;
}
.fragments__card {
  position: relative;
  break-inside: avoid;
  margin-block: 0 1rem;
  display: grid;
  row-gap: 0.5rem;
  --card-shift: 0;
  transform: translateY(var(--card-shift));
  transition: transform 220ms ease;
}
.fragments__card::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(circle at var(--pointer-x, 50%) var(--pointer-y, 50%), color-mix(in oklab, currentColor 16%, transparent) 0%, transparent 55%);
  opacity: 0;
  transition: opacity 200ms ease;
}
.fragments__card--active {
  --card-shift: -0.25rem;
}
.fragments__card--active::after {
  opacity: 0.35;
}
.fragments__card--selected {
  --card-shift: -0.35rem;
  outline: 2px solid currentColor;
}
.fragments__card--selected::after {
  opacity: 0.45;
}
.fragments__figure { position: relative; }
.fragments__img {
  inline-size: 100%;
  block-size: auto;
  object-fit: cover;
}
.fragments__caption { display: flex; justify-content: flex-end; }
.fragments__select {}
.fragments__title { display: inline-block; }
.fragments__title [data-frag-char] {
  display: inline-block;
  transition: transform 200ms ease;
}
/* Simple scatter pattern on hover (re-aggregates on mouseout) */
.fragments__card:hover .fragments__title [data-frag-char]:nth-child(odd) { transform: translateY(-0.15em) rotate(-4deg); }
.fragments__card:hover .fragments__title [data-frag-char]:nth-child(even) { transform: translateY(0.15em) rotate(4deg); }


/* 5) Utilities / Helpers (single-purpose) */
/* Add project utilities here when needed (e.g., alignment helpers). */

/* Utilities: reveal-on-scroll default state */
[data-reveal] {
  opacity: 1;
  transform: none;
  will-change: opacity, transform;
  transition: opacity 600ms var(--ease-out-3, cubic-bezier(.21,.9,.31,1)),
              transform 600ms var(--ease-out-3, cubic-bezier(.21,.9,.31,1));
  transition-delay: var(--reveal-delay, 0ms);
}

[data-reveal][data-reveal-ready="true"]:not([data-revealed="true"]) {
  opacity: 0;
  transform: translateY(12px);
}

/* Theme: Editorial (print-like, low-saturation, no glass/neon) */
html[data-theme="editorial"] {
  --bg: #f8f5ef;
  --bg-muted: #f4efe5;
  --surface: #fffdf8;
  --text: #222222;
  --text-muted: #57534e;
  --primary: #8b5e3c; /* warm brown */
  --primary-600: #7a5336;
  --secondary: #2f5d56; /* ink green */
  --ring: rgba(47, 93, 86, 0.35);
  --border: #e6dfd2;
  --shadow: none; /* minimize depth */
  --radius-s: 4px;
  --radius-m: 6px;
  --radius-l: 10px;
}

html[data-theme="editorial"] body {
  background:
    linear-gradient(to bottom, var(--bg), var(--bg-muted));
}

html[data-theme="editorial"] .site-header {
  background: var(--surface);
  backdrop-filter: none;
  border-bottom: 1px solid var(--border);
}
html[data-theme="editorial"] .site-header__title {
  background: none;
  color: var(--text);
  letter-spacing: 0;
  font-weight: 800;
}
html[data-theme="editorial"] .site-header__link[aria-current="page"],
html[data-theme="editorial"] .site-header__link:hover {
  background: color-mix(in oklab, var(--primary) 10%, transparent);
}

/* Cards and surfaces flatten */
html[data-theme="editorial"] .feature__content,
html[data-theme="editorial"] .timeline__item,
html[data-theme="editorial"] .thread__inner,
html[data-theme="editorial"] .fragments__card,
html[data-theme="editorial"] .surreal__card-inner {
  box-shadow: none;
  border: 1px solid var(--border);
  background: var(--surface);
}

/* Buttons soften */
html[data-theme="editorial"] .timeline__action,
html[data-theme="editorial"] .fragments__select,
html[data-theme="editorial"] .surreal__flip,
html[data-theme="editorial"] .chaos__btn {
  background: color-mix(in oklab, var(--primary) 8%, transparent);
  border-color: color-mix(in oklab, var(--primary) 35%, var(--border));
}

/* Surreal highlight neutral */
html[data-theme="editorial"] .surreal__card::after {
  background: radial-gradient(closest-side at var(--mx) var(--my), color-mix(in oklab, var(--text) 6%, transparent), transparent 60%);
}

/* Fragments background lines vertical rhythm */
html[data-theme="editorial"] .fragments::before {
  background-image: repeating-linear-gradient(180deg, var(--border) 0 1px, transparent 1px 24px);
  opacity: 0.25;
}

/* Chaos stage: less neon, more hatch */
html[data-theme="editorial"] .chaos__stage {
  background:
    linear-gradient(180deg, #262522, #1f1e1b);
  border: 1px solid #3a382f;
  box-shadow: none;
}
html[data-theme="editorial"] .chaos__noise {
  background: repeating-linear-gradient(90deg, rgba(255,255,255,0.02) 0 2px, transparent 2px 4px);
  opacity: 0.25;
}
html[data-theme="editorial"] .chaos__cracks {
  background-image: repeating-linear-gradient(115deg, rgba(255,255,255,0.08) 0 1px, transparent 1px 18px);
}

